var sas=sas||{};sas.utils=sas.utils||{};sas.events=sas.events||{};(function(){sas.utils.getIEVersion=function(){var a=navigator.userAgent.match(/(?:MSIE |Trident\/.*; rv:)(\d+)/);return a?parseInt(a[1]):undefined};sas.events.addEvent=function(b,c,a){if(!b||!c||!a){return}if(b.attachEvent){b.attachEvent("on"+c,a)}else{if(b.addEventListener){b.addEventListener(c,a,false)}}return{removeEvent:function(){if(b.detachEvent){b.detachEvent("on"+c,a)}else{if(b.removeEventListener){b.removeEventListener(c,a,false)}}}}};sas.events.addLoadEvent=function(d,a){if(!d||!a){return}var f="load";var b=function(){return true};var g=sas.utils.getIEVersion();if(g<11||d==document){f="readystatechange";b=function(){if(!d.readyState||d.readyState=="complete"||d.readyState=="loaded"){return true}}}var c=sas.events.addEvent(d,f,function(){if(b()){c.removeEvent();a.apply(this,arguments)}})}})();(function(){var S=function(){};var z=false;var Z=function(){return Math.round(Math.random()*10000000000)};var m="http://www.smartadserver.com";var K=Z();var A=true;var n=encodeURIComponent;var B=0;var d=false;var G=0;var y=false;var L=null;var J={};var r={};var e=[];var C={};var F=true;var E={};sas.callType={STD:"std",IFRAME:"iframe",ONECALL:"onecall",XML:"xml",PASSBACK:"passback"};sas.renderMode={DEFAULT:0,READY:1,ON_DEMAND:2};var U=false;var V=[];var W=function(ac){var i=function(){if(V.length>0){U=true;var ad=V.shift();var ae=ad.options.onLoad;ad.options.onLoad=function(af){i();ae(af)};f[ad.type](ad.ad,ad.options)}else{U=false}};V.push(ac);if(!U){i()}};var f={};var N={onLoad:S,onError:S,onClean:S,beforeRender:S};f[sas.callType.STD]=function(i,ac){M(i.tagId,{ad:i,callType:sas.callType.STD,options:ac,url:x(sas.callType.STD,i,ac),type:"script"});H(i.tagId)};f[sas.callType.IFRAME]=function(i,ac){M(i.tagId,{ad:i,callType:sas.callType.IFRAME,options:ac,url:x(sas.callType.IFRAME,i,ac),type:"iframe",width:i.width||0,height:i.height||0});H(i.tagId)};f[sas.callType.ONECALL]=function(ac,ah){var af=(""+ac.formatId).replace(/\s/g,"").split(",");for(var ag=0;ag<af.length;ag++){var ae=af[ag];var ai="sas_"+ae;M(ai,{ad:ac,callType:sas.callType.ONECALL,options:ah});M(ai,{ad:{tagId:ai,formatId:ae,originalFormatId:ae}})}var aj=x(sas.callType.ONECALL,ac,ah);b(document.getElementsByTagName("head")[0],aj,ah.async,function(){if(F){for(var i in E){H(i)}E={}}},ah.onError)};var o={ERR_SITE:"invalid site id",ERR_PAGE:"invalid page id or name",ERR_FORMAT:"invalid format id",ERR_CONFIG:"invalid configuration",ERR_CALL:"invalid call option"};var R=function(i){throw new Error(i)};if(!Array.isArray){Array.isArray=function(i){return Object.prototype.toString.call(i)==="[object Array]"}}var p=function(af){for(var ac=1;ac<arguments.length;ac++){var ad=arguments[ac];if(!ad||typeof(ad)!=="object"){continue}for(var ae in ad){if(ad[ae]!=null){if(Array.isArray(ad[ae])){af[ae]=ad[ae]}else{if(typeof(ad[ae])==="object"){af[ae]=p({},af[ae],ad[ae])}else{af[ae]=ad[ae]}}}}}return af};var q=function(ac){ac=""+ac;var ae=J[ac]||J["sas_"+ac]||J[r[ac]];if(ae){return ae}else{var ad=ac.split("_");var i=ad.slice(0,ad.length-1).join("");if(ad.length>1&&!isNaN(ad[ad.length-1])){ae=J[i]||J["sas_"+i];if(ae){var af="sas_"+ac;return M(af,ae,{ad:{tagId:af,instance:parseInt(ad[ad.length-1])}})}}}return null};var M=function(i){var ac=Array.prototype.slice.call(arguments,1);J[i]=p.apply(this,[{},J[i]].concat(ac));return J[i]};var v=function(i){if(!i.siteId){R(o.ERR_SITE);return""}return"siteid="+i.siteId};var t=function(i){if(i.pageId){return"pgid="+i.pageId}else{if(i.pageName){return"pgname="+i.pageName}else{R(o.ERR_PAGE);return""}}};var s=function(i){if(!i.formatId){R(o.ERR_FORMAT);return""}return"fmtid="+i.formatId};var l=function(i){var ac=document.createElement("div");ac.id=i;return ac};var a=function(ac,ag,af,ae){var ad=document.createElement("iframe");ad.id="sas_i"+ag.ad.formatId+(ag.ad.instance?"_"+ag.ad.instance:"");ad.scrolling="no";ad.frameBorder=0;ad.width=ag.width;ad.height=ag.height;ad.style.margin=0;ad.style.padding=0;ad.style.width=ag.width+"px";ad.style.height=ag.height+"px";ad.src=ag.url;sas.events.addLoadEvent(ad,af);sas.events.addEvent(ad,"error",ae);ag.options.async?ac.appendChild(ad):document.write(ad.outerHTML)};var ab=1;var c=function(ad,ac,i){var ae=document.createElement("script");ae.id="sas_script"+ab++;ae.type="text/javascript";ae.text=ac;i?ad.appendChild(ae):document.write(ae.outerHTML)};var b=function(ac,ag,i,ae,ad){var af=document.createElement("script");af.id="sas_script"+ab++;af.type="text/javascript";af.src=ag;af.async=i;sas.events.addLoadEvent(af,ae);sas.events.addEvent(af,"error",ad);i?ac.appendChild(af):document.write(af.outerHTML)};var u=function(ad){var i=navigator.userAgent.indexOf("iPad")>0;var ac=""+navigator.userAgent.indexOf("iPhone")>0;if(i||ac){if(i){return"ipad"}else{return"iphone"}}else{if(navigator.userAgent.indexOf("Android")>0){return"android"}}return""};var x=function(ad,i,ac){ac=p({forceMasterFlag:false},ac);A=ac.forceMasterFlag?true:A;K=ac.resetTimestamp?Z():K;if(ad==sas.callType.ONECALL){k()}return sas.utils.buildUrl(m,ad,i,w(),K,ac.async,B,u(),L,window.location.origin)};var w=function(){return"visit="+(k()?"m":"s")};var k=function(){if(A){A=false;return true}return false};var h=function(ac){var i=document.getElementById(ac);if(!i){document.write(l(ac).outerHTML);i=document.getElementById(ac)}return i};var H=function(ae,i){var ah=q(ae);if(!ah){return}var ad=ah.ad.formatId+(ah.ad.instance>1?"_"+ah.ad.instance:"");if(ah.options.async&&(!F||(ah.callType==sas.callType.ONECALL&&!sas_manager))){E[ah.ad.tagId]=true;return}sas.clean(ah.ad.tagId);ah.options.beforeRender({formatId:ad,tagId:ah.ad.tagId});if(ah.callType===sas.callType.ONECALL){ah=g(ah.ad.tagId)}var ag=function(){(i||S)();ah.options.onLoad({formatId:ad,tagId:ah.ad.tagId})};var af=function(){ah.options.onError({formatId:ad,tagId:ah.ad.tagId})};if(ah.callType==sas.callType.ONECALL&&!sas_manager.exists(ad)){sas.noad(ah.ad.formatId);ag();return}var ac=document.getElementById(ah.ad.tagId);if(!ac){return}switch(ah.type){case"iframe":a(ac,ah,ag,af);break;case"script":b(ac,ah.url,ah.options.async,ag,af);break;case"passback":sas.passback({formatId:ah.ad.formatId,chain:ah.chain});break;default:throw new Error("Unsupported script type "+ah.type)}};var D=[];var T=function(i){if(i!=null){D.push(i)}};sas.events.addLoadEvent(document,function(){z=true;D.push=function(i){i()};for(var ac=0;ac<D.length;ac++){D[ac]()}});var Y=false;var X=function(){if(!Y){Y=true;T(function(){sas.render()})}};var I=false;sas.setup=function(i){if(I){throw new Error("sas.setup can only be called once")}I=true;i=i||{};m=i.domain||m;d=i.async||d;sas_ajax=d;B=i.networkid||B;G=i.renderMode||G;F=(G==sas.renderMode.DEFAULT);y=i.inSequence||y;L=i.uid;window.sas_renderMode=G};sas.call=function(ae,i,ad){if(!I){throw new Error("sas has not been initialized. 'sas.setup' must be called first")}i.siteId=i.siteId||i.siteid;i.pageId=i.pageId||i.pageid;i.pageName=i.pageName||i.pagename;i.formatId=i.formatId||i.formatid;ad=p({},N,{async:d},ad);if(!f[ae]){throw new Error("Unsupported call type "+ae)}if(!i||!i.siteId||!(i.pageId||i.pageName)||!i.formatId){throw new Error("Missing parameter(s)")}if(!i.passback){e.push({callType:ae,ad:i,options:ad})}if(ae!=sas.callType.ONECALL){i.tagId=i.tagId||("sas_"+i.formatId);i.originalFormatId=i.originalFormatId||i.formatId;h(i.tagId);if(!r[i.formatId]){r[i.formatId]=i.tagId}}if(ad.async&&G==sas.renderMode.READY){X()}var ac=ad.onLoad;ad.onLoad=function(af){var ah=q(af.tagId);var ai=document.getElementById(ah.ad.tagId);if(!ai){return}var ag=ai.childNodes.length>1;(window.sas_loadHandler||S)({id:ah.ad.formatId,hasAd:ag});ac({formatId:ah.ad.formatId,tagId:ah.ad.tagId,hasAd:ag})};if(ad.async&&y){W({type:ae,ad:i,options:ad})}else{f[ae](i,ad)}};sas.passback=function(i){C[i.formatId]={current:-1,ad:i};sas.next(i.formatId)};sas.next=function(ac){var af=q(ac);var ae=C[af.ad.formatId];if(!af||!ae){return}var i=document.getElementById(af.ad.tagId);if(i){i.innerHTML=""}if(ae.current>=0){var ad=new Image();ad.src=ae.ad.chain[ae.current].noadUrl}ae.current++;if(ae.current<ae.ad.chain.length){if(!!ae.ad.chain[ae.current].countUrl){new Image().src=ae.ad.chain[ae.current].countUrl}if(!ae.ad.chain[ae.current].script){b(i,ae.ad.chain[ae.current].scriptUrl,af.options.async)}else{c(i,ae.ad.chain[ae.current].script,af.options.async)}}};var O={forceMasterFlag:false,resetTimestamp:true,target:undefined};sas.refresh=function(i,ac){if(!F){return}ac=p({},O,i,ac);var ad=S;if(arguments.length<=1&&(typeof i!=="string")&&isNaN(i)){E={};for(var ae in J){E[ae]=true}ad=function(ag){for(var af=0;af<e.length;af++){if(e[af].options.async){if(ag!==undefined&&ag!==null){e[af].ad.target=ag}f[e[af].callType](e[af].ad,e[af].options)}}}}else{var ae=q(i);if(!ae||!ae.options.async){return}ad=function(af){if(af!==undefined&&af!==null){ae.ad.target=af}f[sas.callType.STD](ae.ad,ae.options)}}A=ac.forceMasterFlag?true:A;K=ac.resetTimestamp?Z():K;ad(ac.target)};sas.getTag=function(i){var ac=q(i);return !ac?null:document.getElementById(ac.ad.tagId)};sas.clean=function(ae){var ag=[];if(arguments.length==0){for(var af in J){ag.push(af)}}else{var af=q(ae);if(af){ag.push(af.ad.tagId)}}for(var ad=0;ad<ag.length;ad++){var ae=ag[ad];var af=q(ae);var ac=document.getElementById(af.ad.tagId);af.options.onClean(af.ad.formatId,ac);if(j[ae]){j[ae]()}if(ac){ac.innerHTML=""}}};sas.noad=function(i){if(sas_manager){sas_manager.noad(i)}};sas.render=function(ad){var af=[];if(arguments.length==0){if(!d&&z){throw new Error("Can't call render once page is loaded")}if(!F&&((G==sas.renderMode.READY&&z)||G==sas.renderMode.ON_DEMAND)){F=true;for(var ae in E){af.push(ae)}E={}}else{return}}else{var ae=q(ad);if(!ae){return}if(!ae.options.async&&z){throw new Error("Can't render sync tag ("+ae.ad.tagId+") once page is loaded")}af.push(ae.ad.tagId);h(ae.ad.tagId)}for(var ac=0;ac<af.length;ac++){H(af[ac])}};sas.utils.buildUrl=function(ad,aj,i,ae,ai,ac,af,ah,ak,ag){var al=ad+"/ac?";if(af!=null){al+="nwid="+af+"&"}al+=(v(i)+"&"+t(i)+"&"+s(i));if(aj==sas.callType.IFRAME){al+="&out=iframe"}if(ac){al+="&async=1"}if(aj!=sas.callType.ONECALL){al+="&"+ae}else{al+="&oc=1"}al+="&tmstp="+ai;if(ah.length>0){if(i.target&&i.target.length>0){i.target+=";"}i.target+=("platform="+ah)}if(i.target){al+="&tgt="+n(i.target)}if(aj!=sas.callType.ONECALL){al+="&orgfmtid="+i.originalFormatId;al+="&tag="+i.tagId}if(!!ak){al+="&uid="+ak}if(!!ag){al+="&pgDomain="+encodeURI(ag)}return al};var aa=function(af,ae,ag){var i=af.indexOf("/");if(i<0){throw new Error("Invalid argument : sas_pageid")}this.siteId=af.substring(0,i);var ac=af.substring(i+1);if((ac.indexOf("(")==0)&&(ac.indexOf(")")==ac.length-1)){ac=ac.slice(1,ac.length-1)}var ad=parseInt(ac);if((ad+"")==ac){this.pageId=ad}else{this.pageName=ac}this.formatId=ae;this.target=ag};window.sas_ads=sas;window.sas_ajax=false;window.sas_manager=null;window.sas_unrenderedFormats=[];window.sas_callAd=sas.callAd;window.sas_callAds=sas.callAds;sas.callAd=sas.refresh;sas.callAds=function(){(!F)?sas.render():sas.refresh()};sas.cleanAd=sas.clean;sas.cleanAds=sas.clean;var P=function(ad){var ac=document.createElement("div");ac.innerHTML="_"+ad;var i=ac.childNodes[1];return{type:i.tagName.toLowerCase(),url:i.src,width:i.width||0,height:i.height||0}};var g=function(ae){var af=q(ae);if(!af){return null}var i=af.ad.formatId+(af.ad.instance>1?"_"+af.ad.instance:"");if(sas_manager&&sas_manager.exists(i)){var ad=sas_manager.formats["f"+i];var ac;if(af.options.async||ad.chain){ac={type:ad.scriptType(),url:ad.scriptSrc(),chain:ad.chain,width:ad.scriptType()=="iframe"?ad.scriptWidth():0,height:ad.scriptType()=="iframe"?ad.scriptHeight():0}}else{ac=P(ad.scriptURL())}af=M(af.ad.tagId,ac)}return af};window.sas_render=function(i,ae,ad,af,ac){g(i);sas.render(i)};window.SmartAdServerAjaxOneCall=function(ac,i){g(i);sas.render(i)};window.SmartAdServer_iframe=function(ae,ac,af,ag,ad){var i=new aa(ae,ac,af);i.width=ag;i.height=ad;sas.call("iframe",i)};window.SmartAdServer=function(ad,ac,ae){var i=new aa(ad,ac,ae);sas.call(sas.callType.STD,i)};window.SmartAdServerAjax=SmartAdServer;window.sas_gcf=function(i){return document.getElementById("sas_"+i)};window.sas_appendToContainer=function(ad,ae){var i=document.getElementById("sas_"+ad);if(!i){return}if(typeof(ae)==="string"){var ac=document.createElement("div");ac.innerHTML=ae;ae=ac}i.appendChild(ae)};window.sascc=function(ac,ad){var i=new Image();i.src=m+"/h/mcp?imgid="+ac+"&pgid="+ad+"&uid=[uid]&tmstp="+K+"&tgt=[targeting]"};window.sasmobile=function(ad,ac,ae){var i=new aa(ad,ac,ae);sas.call(sas.callType.STD,i)};var j={};window.sas_addCleanListener=function(ac,i){j[ac]=i};window.sas_cleanAds=sas.clean;window.sas_cleanAd=sas.clean;sas.cmd=sas.cmd||[];sas.cmd.push=function(i){i()};for(var Q=0;Q<sas.cmd.length;Q++){sas.cmd[Q]()}})();